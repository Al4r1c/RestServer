<?xml version="1.0"?>

<project name="RestServer" default="build">
	<property name="source" value="build-test" />

	<target name="clean" description="Nettoie" >
		<delete dir="build"/>
	</target>

	<target name="prepare" description="Prepare" >
		<mkdir dir="build/logs"/>
	</target>

	<target name="phpunit" description="Lance les tests" >
		<phpunit printsummary="true" haltonfailure="true">
			<formatter todir="build/logs" type="xml"/>
			<batchtest>
				<fileset dir="./tests/">
					<include name="*/*/*/*.php"/>
				</fileset>
			</batchtest>
		</phpunit>
	</target>

	<target name="build" depends="clean,prepare,phpunit" description="Tâche principale d'intégration continue" />
</project>